<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SolarTN Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <i class="fas fa-solar-panel"></i>
                <h1>SolarTN Admin</h1>
                <p>Sign in to manage your solar installation website</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">Username or Email</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Sign In
                </button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <!-- Main Admin Panel -->
    <div id="adminPanel" class="admin-panel" style="display: none;">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-solar-panel"></i>
                <span>SolarTN Admin</span>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </li>
                <li class="menu-item" data-section="quotes">
                    <i class="fas fa-quote-left"></i>
                    <span>Quote Requests</span>
                    <span id="quotesBadge" class="badge">0</span>
                </li>
                <li class="menu-item" data-section="content">
                    <i class="fas fa-edit"></i>
                    <span>Content Management</span>
                </li>
                <li class="menu-item" data-section="services">
                    <i class="fas fa-cogs"></i>
                    <span>Services</span>
                </li>
                <li class="menu-item" data-section="projects">
                    <i class="fas fa-project-diagram"></i>
                    <span>Projects</span>
                </li>
                <li class="menu-item" data-section="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp Settings</span>
                </li>
                <li class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="adminUsername">Admin</span>
                </div>
                <button id="logoutBtn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    Logout
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="header-actions">
                    <button id="refreshBtn" class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboardSection" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-quote-left"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalQuotes">0</h3>
                            <p>Total Quotes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="newQuotes">0</h3>
                            <p>New Quotes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="convertedQuotes">0</h3>
                            <p>Converted</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="monthlyQuotes">0</h3>
                            <p>This Month</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Recent Quote Requests</h3>
                        <div id="recentQuotes" class="recent-list">
                            <!-- Recent quotes will be loaded here -->
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Quick Actions</h3>
                        <div class="quick-actions">
                            <button class="action-btn" onclick="showSection('quotes')">
                                <i class="fas fa-quote-left"></i>
                                View All Quotes
                            </button>
                            <button class="action-btn" onclick="showSection('content')">
                                <i class="fas fa-edit"></i>
                                Edit Content
                            </button>
                            <button class="action-btn" onclick="showSection('services')">
                                <i class="fas fa-cogs"></i>
                                Manage Services
                            </button>
                            <button class="action-btn" onclick="showSection('projects')">
                                <i class="fas fa-project-diagram"></i>
                                Add Project
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quotes Section -->
            <section id="quotesSection" class="content-section">
                <div class="section-header">
                    <h2>Quote Requests</h2>
                    <div class="section-actions">
                        <select id="quoteFilter" class="filter-select">
                            <option value="">All Status</option>
                            <option value="New">New</option>
                            <option value="Contacted">Contacted</option>
                            <option value="Quote Sent">Quote Sent</option>
                            <option value="Follow Up">Follow Up</option>
                            <option value="Converted">Converted</option>
                            <option value="Closed">Closed</option>
                        </select>
                        <input type="text" id="quoteSearch" placeholder="Search quotes..." class="search-input">
                    </div>
                </div>
                <div class="quotes-table-container">
                    <table class="quotes-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Location</th>
                                <th>Property Type</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="quotesTableBody">
                            <!-- Quotes will be loaded here -->
                        </tbody>
                    </table>
                </div>
                <div id="quotesPagination" class="pagination">
                    <!-- Pagination will be loaded here -->
                </div>
            </section>

            <!-- Content Management Section -->
            <section id="contentSection" class="content-section">
                <div class="section-header">
                    <h2>Content Management</h2>
                </div>
                <div class="content-tabs">
                    <button class="tab-btn active" data-tab="hero">Hero Section</button>
                    <button class="tab-btn" data-tab="about">About Us</button>
                    <button class="tab-btn" data-tab="contact">Contact Info</button>
                    <button class="tab-btn" data-tab="social">Social Media</button>
                    <button class="tab-btn" data-tab="seo">SEO Settings</button>
                </div>
                <div class="content-forms">
                    <!-- Hero Section Form -->
                    <div id="heroForm" class="content-form active">
                        <h3>Hero Section</h3>
                        <form id="heroContentForm">
                            <div class="form-group">
                                <label for="heroTitle">Main Title</label>
                                <input type="text" id="heroTitle" name="title" maxlength="100">
                            </div>
                            <div class="form-group">
                                <label for="heroSubtitle">Subtitle</label>
                                <input type="text" id="heroSubtitle" name="subtitle" maxlength="200">
                            </div>
                            <div class="form-group">
                                <label for="heroDescription">Description</label>
                                <textarea id="heroDescription" name="description" maxlength="500" rows="4"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="heroCtaText">CTA Button Text</label>
                                <input type="text" id="heroCtaText" name="ctaText" value="Get Free Quote">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Hero Section</button>
                        </form>
                    </div>

                    <!-- About Section Form -->
                    <div id="aboutForm" class="content-form">
                        <h3>About Us Section</h3>
                        <form id="aboutContentForm">
                            <div class="form-group">
                                <label for="aboutTitle">Title</label>
                                <input type="text" id="aboutTitle" name="title" maxlength="100">
                            </div>
                            <div class="form-group">
                                <label for="aboutSubtitle">Subtitle</label>
                                <input type="text" id="aboutSubtitle" name="subtitle" maxlength="200">
                            </div>
                            <div class="form-group">
                                <label for="aboutDescription">Description</label>
                                <textarea id="aboutDescription" name="description" maxlength="1000" rows="5"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="aboutMission">Mission Statement</label>
                                <textarea id="aboutMission" name="mission" maxlength="500" rows="3"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Save About Section</button>
                        </form>
                    </div>

                    <!-- Contact Info Form -->
                    <div id="contactForm" class="content-form">
                        <h3>Contact Information</h3>
                        <form id="contactContentForm">
                            <div class="form-group">
                                <label for="contactPhone">Phone Number</label>
                                <input type="tel" id="contactPhone" name="phone" pattern="[6-9][0-9]{9}">
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email Address</label>
                                <input type="email" id="contactEmail" name="email">
                            </div>
                            <div class="form-group">
                                <label for="contactAddress">Address</label>
                                <textarea id="contactAddress" name="address" maxlength="500" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="whatsappNumber">WhatsApp Number</label>
                                <input type="tel" id="whatsappNumber" name="whatsappNumber" pattern="[6-9][0-9]{9}">
                            </div>
                            <div class="form-group">
                                <label for="workingHours">Working Hours</label>
                                <input type="text" id="workingHours" name="workingHours" value="Mon-Sat: 9:00 AM - 6:00 PM">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Contact Info</button>
                        </form>
                    </div>

                    <!-- Social Media Form -->
                    <div id="socialForm" class="content-form">
                        <h3>Social Media Links</h3>
                        <form id="socialContentForm">
                            <div class="form-group">
                                <label for="facebookUrl">Facebook URL</label>
                                <input type="url" id="facebookUrl" name="facebookUrl" placeholder="https://facebook.com/yourpage">
                            </div>
                            <div class="form-group">
                                <label for="instagramUrl">Instagram URL</label>
                                <input type="url" id="instagramUrl" name="instagramUrl" placeholder="https://instagram.com/yourpage">
                            </div>
                            <div class="form-group">
                                <label for="twitterUrl">Twitter URL</label>
                                <input type="url" id="twitterUrl" name="twitterUrl" placeholder="https://twitter.com/yourpage">
                            </div>
                            <div class="form-group">
                                <label for="linkedinUrl">LinkedIn URL</label>
                                <input type="url" id="linkedinUrl" name="linkedinUrl" placeholder="https://linkedin.com/company/yourcompany">
                            </div>
                            <div class="form-group">
                                <label for="youtubeUrl">YouTube URL</label>
                                <input type="url" id="youtubeUrl" name="youtubeUrl" placeholder="https://youtube.com/channel/yourchannel">
                            </div>
                            <div class="form-group">
                                <label for="whatsappBusinessUrl">WhatsApp Business URL</label>
                                <input type="url" id="whatsappBusinessUrl" name="whatsappBusinessUrl" placeholder="https://wa.me/919876543210">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Social Media Links</button>
                        </form>
                    </div>

                    <!-- SEO Settings Form -->
                    <div id="seoForm" class="content-form">
                        <h3>SEO Settings</h3>
                        <form id="seoContentForm">
                            <div class="form-group">
                                <label for="seoTitle">Page Title</label>
                                <input type="text" id="seoTitle" name="title" maxlength="60">
                                <small>Recommended: 50-60 characters</small>
                            </div>
                            <div class="form-group">
                                <label for="seoDescription">Meta Description</label>
                                <textarea id="seoDescription" name="description" maxlength="160" rows="3"></textarea>
                                <small>Recommended: 150-160 characters</small>
                            </div>
                            <div class="form-group">
                                <label for="seoKeywords">Keywords (comma-separated)</label>
                                <input type="text" id="seoKeywords" name="keywords" placeholder="solar panel installation Tamil Nadu, solar service TN">
                            </div>
                            <div class="form-group">
                                <label for="ogTitle">Open Graph Title</label>
                                <input type="text" id="ogTitle" name="ogTitle" maxlength="60">
                            </div>
                            <div class="form-group">
                                <label for="ogDescription">Open Graph Description</label>
                                <textarea id="ogDescription" name="description" maxlength="160" rows="3"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Save SEO Settings</button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Services Section -->
            <section id="servicesSection" class="content-section">
                <div class="section-header">
                    <h2>Services Management</h2>
                    <button id="addServiceBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Add Service
                    </button>
                </div>
                <div id="servicesList" class="services-list">
                    <!-- Services will be loaded here -->
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projectsSection" class="content-section">
                <div class="section-header">
                    <h2>Projects Management</h2>
                    <button id="addProjectBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Add Project
                    </button>
                </div>
                <div id="projectsList" class="projects-list">
                    <!-- Projects will be loaded here -->
                </div>
            </section>

            <!-- WhatsApp Settings Section -->
            <section id="whatsappSection" class="content-section">
                <div class="section-header">
                    <h2>WhatsApp Settings</h2>
                </div>
                <div class="whatsapp-settings">
                    <div class="settings-card">
                        <h3>Quick Links</h3>
                        <div id="whatsappQuickLinks" class="quick-links">
                            <!-- Quick links will be loaded here -->
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3>Business Status</h3>
                        <div id="whatsappStatus" class="business-status">
                            <!-- Status will be loaded here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settingsSection" class="content-section">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Profile Settings</h3>
                        <form id="profileForm">
                            <div class="form-group">
                                <label for="profileFirstName">First Name</label>
                                <input type="text" id="profileFirstName" name="firstName">
                            </div>
                            <div class="form-group">
                                <label for="profileLastName">Last Name</label>
                                <input type="text" id="profileLastName" name="lastName">
                            </div>
                            <div class="form-group">
                                <label for="profilePhone">Phone</label>
                                <input type="tel" id="profilePhone" name="phone">
                            </div>
                            <button type="submit" class="btn btn-primary">Update Profile</button>
                        </form>
                    </div>
                    <div class="settings-card">
                        <h3>Change Password</h3>
                        <form id="passwordForm">
                            <div class="form-group">
                                <label for="currentPassword">Current Password</label>
                                <input type="password" id="currentPassword" name="currentPassword" required>
                            </div>
                            <div class="form-group">
                                <label for="newPassword">New Password</label>
                                <input type="password" id="newPassword" name="newPassword" required>
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password</label>
                                <input type="password" id="confirmPassword" name="confirmPassword" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Quote Details Modal -->
    <div id="quoteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Quote Details</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="quoteModalBody">
                <!-- Quote details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Service Modal -->
    <div id="serviceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="serviceModalTitle">Add Service</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="serviceForm">
                    <div class="form-group">
                        <label for="serviceIcon">Icon (Font Awesome class)</label>
                        <input type="text" id="serviceIcon" name="icon" placeholder="fas fa-home" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceTitle">Title</label>
                        <input type="text" id="serviceTitle" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="serviceDescription">Description</label>
                        <textarea id="serviceDescription" name="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="serviceFeatures">Features (one per line)</label>
                        <textarea id="serviceFeatures" name="features" rows="4" placeholder="Feature 1&#10;Feature 2&#10;Feature 3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="servicePrice">Price Range (optional)</label>
                        <input type="text" id="servicePrice" name="price" placeholder="â‚¹1-3 Lakhs">
                    </div>
                    <div class="form-group">
                        <label for="serviceWhatsappMessage">WhatsApp Message Template</label>
                        <textarea id="serviceWhatsappMessage" name="whatsappMessage" rows="3" placeholder="Hi! I'm interested in [SERVICE_NAME]. Please provide more details."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary modal-close">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Service</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit Project Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="projectModalTitle">Add Project</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="projectForm">
                    <div class="form-group">
                        <label for="projectTitle">Project Title</label>
                        <input type="text" id="projectTitle" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="projectDescription">Description</label>
                        <textarea id="projectDescription" name="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="projectLocation">Location</label>
                        <input type="text" id="projectLocation" name="location" required>
                    </div>
                    <div class="form-group">
                        <label for="projectType">Project Type</label>
                        <select id="projectType" name="type" required>
                            <option value="Residential">Residential</option>
                            <option value="Commercial">Commercial</option>
                            <option value="Industrial">Industrial</option>
                            <option value="Educational">Educational</option>
                            <option value="Healthcare">Healthcare</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="projectSize">System Size</label>
                        <input type="text" id="projectSize" name="size" placeholder="5kW">
                    </div>
                    <div class="form-group">
                        <label for="projectImage">Project Image</label>
                        <input type="file" id="projectImageFile" name="imageFile" accept="image/*" onchange="previewImage(this)">
                        <div id="imagePreview" class="image-preview" style="display: none;">
                            <img id="previewImg" src="" alt="Preview" style="max-width: 200px; max-height: 150px; margin-top: 10px;">
                        </div>
                        <small class="form-text">Or enter image URL:</small>
                        <input type="url" id="projectImageUrl" name="imageUrl" placeholder="https://example.com/image.jpg" style="margin-top: 5px;">
                    </div>
                    <div class="form-group">
                        <label for="projectCompletedDate">Completion Date</label>
                        <input type="date" id="projectCompletedDate" name="completedDate">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary modal-close">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Project</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <i class="notification-icon"></i>
            <span class="notification-message"></span>
        </div>
    </div>

    <script src="admin.js"></script>
    <script>
        // Image preview function
        function previewImage(input) {
            const preview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                    preview.style.display = 'block';
                }
                
                reader.readAsDataURL(input.files[0]);
            } else {
                preview.style.display = 'none';
            }
        }
    </script>
</body>
</html>
